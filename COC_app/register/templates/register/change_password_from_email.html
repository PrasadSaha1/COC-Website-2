{% extends "main/base.html" %}

{% block content %}
  <h2>Change Your Password</h2>
  <form method="POST" id="change-password-form">
    {% csrf_token %}
    
    <div class="form-group">
      <label for="new_password">New Password</label>
      <input type="password" name="new_password" id="new_password" required class="form-control">
    </div>
    
    <div class="form-group">
      <label for="confirm_password">Confirm Password</label>
      <input type="password" name="confirm_password" id="confirm_password" required class="form-control">
    </div>

    <button type="submit" class="btn btn-primary">Change Password</button>
  </form>

  {% if error_message %}
    <div class="alert alert-danger mt-3">
      {{ error_message }}
    </div>
  {% endif %}

  <div id="success-message" class="alert alert-success mt-3" style="display: none;">
    Password changed successfully!
  </div>

  <script>
    // Show success message if the form was submitted successfully
    const form = document.getElementById('change-password-form');
    form.addEventListener('submit', function(event) {
      event.preventDefault(); 
      document.getElementById('success-message').style.display = 'block';
      form.submit();
    });
  </script>
{% endblock %}
